# 操作手册

代码我分为了5个部分，均采用了makefile的形式，题目完成部分在Omp_Parallel，代码均可以正常编译和运行，同时我将代码放在了github仓库的master分支上，若压缩包中代码不能正常运行，老师可自行git clone下载源码

```
https://github.com/Earnshawnlpl/xjtu_SummerProject/tree/master
```

## Omp_Parallel

进入该文件夹输入命令如下

```
make
./Omp_Parallel
```

程序运行时间较长，**需要耐心等待几分钟**

Omp_Parallel.c中实现了题目要求的内容

```
1.矩阵大小A：2048 * 4096，B：4096 * 2048。
2.统计运行时间，实现正优化，即并行后时间会缩短。
3.自行编写Makefile，使用gcc编译。
4.优化编译选项，提高运行效率。
5.自行编写正确性验证部分，与串行代码生成的C矩阵进行结果对比。
```

## MPI_Parallel

进入该文件夹输入命令如下

```
make
mpirun -np 4 ./MPI_Parallel
```

采用MPI对服务器有一定要求，我的服务器只有2核就跑不了该程序，所以用了本机的虚拟机跑的。

这里为了节省时间，矩阵大小改为了A：16 * 32，B：32* 16。若要修改可以在代码前面的define处进行修改

```
#define A_ROWS 16
#define A_COLS 32
#define B_ROWS 32
#define B_COLS 16
```

## Omp_Strassen

进入该文件夹输入命令如下

```
make
./Omp_Strassen
```

该代码清晰展示了Strassen算法

## Block_pro

进入该文件夹输入命令如下

```
make
./Block_pro
```

可以在define处修改块的大小

```
//此处为32
#define BLOCK_SIZE 32  // 调整块大小以适应缓存
```

## sparsematrix

进入该文件夹输入命令如下

```
make
./sparsematrix
```

该代码基于OMP完成，还有不少优化的空间

